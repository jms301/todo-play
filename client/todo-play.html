<head>
  <title>todo:play</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>
  <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div id="nav-bar" class="container-fluid">
      <div class="navbar-header">
        <a class="navbar-brand" href="#">Todo-Play</a>
      </div>
      <div class="nav navbar-nav navbar-right">
      {{#if currentUser}}
      <ul class="nav navbar-nav">
        <li> <a id="edit_config" href="#">config</a></li>
      </ul>
      {{/if}}
      {{>loginButtons}}
      </div>
    </div>
  </nav>
  {{#if session 'show_config'}}
    <div class="container-fluid">
      {{#with user_config}}
        {{>config}}
      {{/with}}
    </div>
  {{else}}
  <div id="charts" class="container-fluid">
    {{>days}}
  </div>
  <div id="main-pane" class="container-fluid">
      {{>todo_play}}
  </div>
  {{/if}}
</body>

<template name = "days">
    <div class="chart col-md-2">
        <strong>Day Before</strong>
      <div class="central">
          {{#with before_chart}}
            {{>chart}}
          {{/with}}
      </div>
    </div>
    <div id="yesterday" class="chart col-md-3">
      <strong>Yesterday</strong>
      <div class="central">
          {{#with yesterday_chart}}
            {{>chart}}
          {{/with}}
      </div>
    </div>
    <div id="today" class="chart col-md-3">
      <strong>Today ({{today}})</strong>
      <div class="central">
          {{#with today_chart}}
            {{>chart}}
          {{/with}}
      </div>
    </div>
    <div id="ticker" class="chart col-md-3"><strong>Done Ticker:</strong>
    <br/>
    <br/>
    {{#with ticker}}
    <ul id="ticker-item" class="items-list">
    Done by {{display_name}} -
    <li class="item">
    <div class="item-checkbox ticked"><label class="ticked">¬</label></div>
    <div class="item-text"><span class="item-text">{{text}}</span></div>
    <div class="item-remove"><div class="item-remove-x">
      <label class="glyphicon glyphicon-trash"></label>
    </div></div>
    </li>
    </ul>
    {{/with}}
  </div>

</template>

<template name = "chart" >
            <div class="bar habit-bar" style="height: {{habit_height}}"> </div>
            <div class="bar daily-bar" style="height: {{daily_height}}"> </div>
            <div class="bar todo-bar" style="height: {{todo_height}}"> </div>
</template>
<template name = "config">
  <div class="col-md-2">
  </div>
  <div class="col-md-8" id="config">
    <h1>User Config:</h1>
    <div id="config-items">
      <p><label>Display Name: </label> <input id="display_name" value="{{display_name}}"></p>
      <p><label>Day Ends At (hours): </label> <input id="day_end" value="{{day_end}}"></p>
      <p><label>Todo red by (days): </label> <input id="red_age" value="{{red_age}}"></p>
      <p><button id='save' class="btn btn-primary">Save</button>
      <button id='cancel' class="btn">Cancel</button></p>
    </div>
  </div>
  <div class="col-md-2">
  </div>
</template>

<template name="todo_play">
    <div class="col-md-2" id="goals">
    {{>goals}}
    </div>
    <div class="main col-md-3" id="habits">
      <h1>Do <label class="glyphicon glyphicon-calendar"></label> Often:</h1>
	{{>habits}}
    </div>
    <div class="main col-md-3">
      <h1>Do Daily:</h1>
	{{>dailies}}
    </div>
    <div class="main col-md-3">
      <h1>To Do:</h1>
	{{>todos}}
    </div>
    <div class="main col-md-1"></div>
</template>

<template name="goals">
  <ul class="nav nav-tabs tabs-left" role="tablist">
    <li class="{{all_active}} all-goals"><a href="#">All</a></li>
    {{#each goals}}
      {{>goal}}
    {{/each}}
    <li class="hide-on-small"><input id="add-goal" type="text" placeholder="New Goal" class="add-goal"/></li>
  </ul>
</template>

<template name="goal">
  <li class="{{is_active}} goals"><a href="#">{{text}}</a></li>
</template>

<template name="habits">
 <div class="add-item-form">
 <span class="add-item-field">
 <input type="text"  placeholder="New Habit" id="add-habit" class="add-item-text"/>
 </span>
 <input type="submit" value="+" class="add-item-btn"/>
 </div>
<ul id="habit-list" class="items-list">
  {{#each habits}}
    {{> habit_item}}
  {{/each}}
</ul>
</template>


<template name="dailies">
 <div class="add-item-form">
 <span class="add-item-field">
 <input type="text"  placeholder="New Daily" id="add-daily" class="add-item-text"/>
 </span>
 <input type="button" value="+" class="add-item-btn"/>
 </div>
<ul id="daily-list" class="items-list">
  {{#each dailies}}
    {{> daily_item}}
  {{/each}}
</ul>
</template>

<template name="todos">
 <div class="add-item-form">
 <span class="add-item-field">
 <input type="text"  placeholder="New Todo" class="add-item-text"/>
 </span>
 <input type="button" value="+" class="add-item-btn"/>
 </div>
<ul id="todo-list" class="items-list">
  {{#each todos}}
    {{> todo_item}}
  {{/each}}
</ul>
</template>

<template name="habit_item">
  <li id="habit-{{_id}}" class="item">
    <div class="item-checkbox {{habit_status}}"><label class="habit-plus">+</label></div>
    <div class="item-text"><span class="item-text"> {{text}}</span>
      <div class="expand-edit {{not_editing}}"><label class="glyphicon glyphicon-collapse-down"></label></div>
      <div class="item-details {{editing}}">
      Title: <br />
      <input id="item-title-{{_id}}" value="{{text}}" class="item-edit-title"/>
      Notes: <br/>
      <textarea id="item-notes-{{_id}}" rows=3 cols=35 class="item-edit-notes">{{notes}}</textarea>
      Goal: <br />
      <select id="item-goals-{{_id}}">
      <option> </option>
      {{#each goals}}
      <option value="{{_id}}" {{is_selected ..}}>{{text}}</option>
      {{/each}}
      </select><br />
      Frequency (days): <input type="number" id="habit-freq-{{_id}}" value="{{freq}}" class="item-edit-freq"/>
      <div class="cancel-edit"><label class="cancel-edit">+</label></div>
      </div>
    </div>
    <div class="item-remove"><div class="item-remove-x">
      <label class="glyphicon glyphicon-trash"></label>
    </div></div>
  </li>
</template>


<template name="daily_item">
  <li id="daily-{{_id}}" class="item">
    <div class="item-checkbox {{ticked}}"><label class="{{ticked}}">¬</label></div>
    <div class="item-text"><span class="item-text"> {{text}}</span>
      <div class="expand-edit {{not_editing}}"><label class="glyphicon glyphicon-collapse-down"></label></div>
      <div class="item-details {{editing}}">
      Title: <input id="item-title-{{_id}}" value="{{text}}" class="item-edit-title"/>
      Notes: <br/>
      <textarea id="item-notes-{{_id}}" rows=3 cols=35 class="item-edit-notes">{{notes}}</textarea>
      Goal: <br />
      <select id="item-goals-{{_id}}">
      <option> </option>
      {{#each goals}}
      <option value="{{_id}}" {{is_selected ..}}>{{text}}</option>
      {{/each}}
      </select><br />
      <div class="cancel-edit"><label class="cancel-edit">+</label></div>
      </div>
    </div>
    <div class="item-remove"><div class="item-remove-x">
      <label class="glyphicon glyphicon-trash"></label>
    </div></div>
  </li>
</template>

<template name="todo_item">
  <li id="todo-{{_id}}" class="item">
    <div class="item-checkbox {{ticked}}" style="background-color: {{color}}"><label class="{{ticked}}">¬</label></div>
    <div class="item-text"><span class="item-text"> {{text}}</span>
      <div class="expand-edit {{not_editing}}"><label class="glyphicon glyphicon-collapse-down"></label></div>
     <div class="item-details {{editing}}">
      Title: <input id="item-title-{{_id}}" value="{{text}}" class="item-edit-title"/>
      Notes: <br/>
      <textarea id="item-notes-{{_id}}" rows=3 cols=35 class="item-edit-notes">{{notes}}</textarea>
      Goal: <br />
      <select id="item-goals-{{_id}}">
      <option> </option>
      {{#each goals}}
      <option value="{{_id}}" {{is_selected ..}}>{{text}}</option>
      {{/each}}
      </select><br />
      Private: <input type="checkbox" checked="{{private}}" id="item-private-{{_id}}" class="item-private"/>
      <div class="cancel-edit"><label class="cancel-edit">+</label></div>
      </div>
    </div>
    <div class="item-remove"><div class="item-remove-x">
      <label class="glyphicon glyphicon-trash"></label>
    </div></div>
  </li>
</template>
